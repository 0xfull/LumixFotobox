<UserControl
    x:Class="GMaster.Views.CameraViewControl"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:GMaster.Views"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:converters="using:GMaster.Views.Converters"
    xmlns:tools="using:Tools"
    mc:Ignorable="d"
    d:DataContext="{d:DesignInstance local:CameraViewModel}">
    <UserControl.Resources>
        <ResourceDictionary Source="CameraViewControlResources.xaml"/>
    </UserControl.Resources>
    <Grid Background="DarkBlue">
        <Viewbox Visibility="{Binding IsConnected, Converter={StaticResource NotVisibilityConverter}, Mode=TwoWay}">
            <TextBlock Foreground="White">NO CONNECTION</TextBlock>
        </Viewbox>

        <Grid Visibility="{Binding IsConnected, Converter={StaticResource VisibilityConverter}, Mode=TwoWay}">
            <Image x:Name="LiveView"
                       Source="{Binding LiveViewFrame, Converter={StaticResource ImageMemoryStreamConverter}}"
                       SizeChanged="LiveView_OnSizeChanged" />
            <Path Stroke="Gold" StrokeThickness="5" x:Name="FocusPoint">
                <Path.Data>
                    <PathGeometry x:Name="FocusPointGeometry" >
                        <PathGeometry.Figures>
                            <PathFigure StartPoint="0,0.3">
                                <PathFigure.Segments>
                                    <LineSegment Point="0,0" />
                                    <LineSegment Point="0.3,0" />
                                </PathFigure.Segments>
                            </PathFigure>
                            <PathFigure StartPoint="1,0.3">
                                <PathFigure.Segments>
                                    <LineSegment Point="1,0" />
                                    <LineSegment Point="0.7,0" />
                                </PathFigure.Segments>
                            </PathFigure>
                            <PathFigure StartPoint="0,0.7">
                                <PathFigure.Segments>
                                    <LineSegment Point="0,1" />
                                    <LineSegment Point="0.3,1" />
                                </PathFigure.Segments>
                            </PathFigure>
                            <PathFigure StartPoint="1,0.7">
                                <PathFigure.Segments>
                                    <LineSegment Point="1,1" />
                                    <LineSegment Point="0.7,1" />
                                </PathFigure.Segments>
                            </PathFigure>
                        </PathGeometry.Figures>
                    </PathGeometry>
                </Path.Data>
            </Path>
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="100" />
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*" />
                    <RowDefinition Height="100" />
                    <RowDefinition Height="25" />
                    <RowDefinition Height="100" />
                    <RowDefinition Height="*" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="20" />
                </Grid.RowDefinitions>

                <Button Grid.Column="3" Grid.Row="1" Command="{Binding RecCommand}"
                            Style="{StaticResource TransparentButtonStyle}">
                    <Viewbox>
                        <TextBlock Padding="5" FontFamily="Segoe MDL2 Assets"
                                       Text="{Binding SelectedCamera.Camera.RecState, Converter={StaticResource RecStateConvertor}}" />
                    </Viewbox>
                </Button>
                <Button Grid.Column="3" Grid.Row="3" Command="{Binding CaptureCommand}"
                            Style="{StaticResource TransparentButtonStyle}"
                            IsEnabled="{Binding SelectedCamera.Camera.CanCapture}">
                    <Viewbox>
                        <TextBlock Padding="5" FontFamily="Segoe MDL2 Assets" Text="&#xE722;" />
                    </Viewbox>
                </Button>
                <StackPanel Grid.Column="1" Grid.Row="5" Orientation="Horizontal">
                    <StackPanel Width="100">
                        <ComboBox HorizontalAlignment="Stretch" Margin="0,0,10,0"
                                      ItemsSource="{Binding CurrentApertures}"
                                      HorizontalContentAlignment="Center"
                                      SelectedItem="{Binding CurrentAperture, Mode=TwoWay}"
                                      Visibility="{Binding CanChangeAperture, Converter={StaticResource VisibilityConverter}}" />
                        <TextBlock HorizontalAlignment="Stretch"
                                       Text="{Binding SelectedCamera.Camera.OffFrameProcessor.Aperture.Text}"
                                       VerticalAlignment="Stretch" TextAlignment="Center"
                                       Visibility="{Binding CanChangeAperture, Converter={StaticResource NotVisibilityConverter}}" />
                    </StackPanel>
                    <StackPanel Width="100">
                        <ComboBox HorizontalAlignment="Stretch" Margin="0,0,10,0"
                                      ItemsSource="{Binding ShutterSpeeds}"
                                      HorizontalContentAlignment="Center"
                                      SelectedItem="{Binding CurrentShutter, Mode=TwoWay}"
                                      Visibility="{Binding CanChangeShutter, Converter={StaticResource VisibilityConverter}}" />
                        <TextBlock HorizontalAlignment="Stretch"
                                       Text="{Binding SelectedCamera.Camera.OffFrameProcessor.Shutter.Text}"
                                       TextAlignment="Center"
                                       Visibility="{Binding CanChangeShutter, Converter={StaticResource NotVisibilityConverter}}" />
                    </StackPanel>
                    <StackPanel Width="100">
                        <ComboBox HorizontalAlignment="Stretch" Margin="0,0,10,0"
                                      ItemsSource="{Binding IsoValues}"
                                      VerticalAlignment="Stretch" HorizontalContentAlignment="Center"
                                      SelectedItem="{Binding CurrentIso, Mode=TwoWay}" />
                    </StackPanel>

                    <ContentControl IsEnabled="{Binding HasPowerZoom, Mode=TwoWay}">
                        <Grid Width="200">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>
                            <tools:PressButton Grid.Column="0" FontSize="20" Padding="-2" Released="ZoomReleased"
                                                   Pressed="ZoomWideFast_Pressed">
                                <TextBlock Padding="5" FontFamily="Segoe MDL2 Assets" Text="&#xEB9E;"
                                               VerticalAlignment="Center" />
                            </tools:PressButton>
                            <tools:PressButton Grid.Column="1" Padding="0" Released="ZoomReleased"
                                                   VerticalAlignment="Stretch" Pressed="ZoomWideNormal_Pressed">
                                <TextBlock Padding="5" FontFamily="Segoe MDL2 Assets" Text="&#xEDB5;"
                                               VerticalAlignment="Center" RenderTransformOrigin="0.5,0.5">
                                    <TextBlock.RenderTransform>
                                        <ScaleTransform ScaleX="-1" />
                                    </TextBlock.RenderTransform>
                                </TextBlock>
                            </tools:PressButton>
                            <Slider Margin="5,0,5,0" Padding="0,-5,0,-10" Grid.Column="2"
                                        Minimum="{Binding SelectedCamera.Camera.LensInfo.MinZoom, Mode=TwoWay}"
                                        Maximum="{Binding SelectedCamera.Camera.LensInfo.MaxZoom, Mode=TwoWay}"
                                        Value="{Binding SelectedCamera.Camera.OffFrameProcessor.Zoom, Mode=TwoWay}"
                                        IsEnabled="False" />
                            <tools:PressButton Grid.Column="3" Padding="0" Released="ZoomReleased"
                                                   VerticalAlignment="Stretch" Pressed="ZoomTeleNormal_Pressed">
                                <TextBlock Padding="5" FontFamily="Segoe MDL2 Assets" Text="&#xEDB5;"
                                               VerticalAlignment="Center" />
                            </tools:PressButton>
                            <tools:PressButton Grid.Column="4" FontSize="20" Padding="-2" Released="ZoomReleased"
                                                   Pressed="ZoomTeleFast_Pressed">
                                <TextBlock Padding="5" FontFamily="Segoe MDL2 Assets" Text="&#xEB9D;"
                                               VerticalAlignment="Center" />
                            </tools:PressButton>
                        </Grid>
                    </ContentControl>

                    <ContentControl Visibility="{Binding CanManualFocus, Mode=TwoWay, Converter={StaticResource VisibilityConverter}}"
                            Margin="10,0,0,0">
                        <Grid Width="200">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>
                            <RepeatButton Grid.Column="0" FontSize="20" Padding="-2" Click="FocusWideFast_Pressed"
                                              Delay="200" Interval="100">
                                <TextBlock Padding="5" FontFamily="Segoe MDL2 Assets" Text="&#xEB9E;"
                                               VerticalAlignment="Center" />
                            </RepeatButton>
                            <RepeatButton Grid.Column="1" Padding="0" Click="FocusWideNormal_Pressed"
                                              VerticalAlignment="Stretch" Delay="200" Interval="200">
                                <TextBlock Padding="5" FontFamily="Segoe MDL2 Assets" Text="&#xEDB5;"
                                               VerticalAlignment="Center" RenderTransformOrigin="0.5,0.5">
                                    <TextBlock.RenderTransform>
                                        <ScaleTransform ScaleX="-1" />
                                    </TextBlock.RenderTransform>
                                </TextBlock>
                            </RepeatButton>
                            <Slider Margin="5,0,5,0" Padding="0,-5,0,-10" Grid.Column="2" Minimum="0"
                                        Maximum="{Binding SelectedCamera.Camera.MaximumFocus, Mode=TwoWay}"
                                        Value="{Binding SelectedCamera.Camera.CurrentFocus, Mode=TwoWay}"
                                        IsEnabled="False" />
                            <RepeatButton Grid.Column="3" Padding="0" Click="FocusTeleNormal_Pressed"
                                              VerticalAlignment="Stretch" Delay="200" Interval="200">
                                <TextBlock Padding="5" FontFamily="Segoe MDL2 Assets" Text="&#xEDB5;"
                                               VerticalAlignment="Center" />
                            </RepeatButton>
                            <RepeatButton Grid.Column="4" FontSize="20" Padding="-2" Click="FocusTeleFast_Pressed"
                                              Delay="200" Interval="200">
                                <TextBlock Padding="5" FontFamily="Segoe MDL2 Assets" Text="&#xEB9D;"
                                               VerticalAlignment="Center" />
                            </RepeatButton>
                        </Grid>
                    </ContentControl>
                </StackPanel>
            </Grid>
        </Grid>
    </Grid>
</UserControl>